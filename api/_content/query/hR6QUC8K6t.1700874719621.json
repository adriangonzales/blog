{"_path":"/blog/high-level-sso-custom-links","_dir":"blog","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"HighLevel: Utilizing SSO sessions from inside Custom Menu Links | Adrian Gonzales","description":"You can use SSO sessions from inside Custom Menu Links, not just custom pages","excerpt":"You can use SSO sessions from inside Custom Menu Links, not just custom pages","headline":"HighLevel: Utilizing SSO sessions from inside Custom Menu Links","date":"2023-11-22T12:00:00","dateUpdated":"","author":"Adrian Gonzales","authorUrl":"https://virexmachina.com/","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I'm working on an extensive custom integration with "},{"type":"element","tag":"a","props":{"href":"https://www.gohighlevel.com/","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"HighLevel"}]},{"type":"text","value":", now possible because they recently built a single-sign-on process that allows web applications embedded in iFrames to validate that they are being loaded within the HL interface, as well as retrieve information about the current user and account viewing the application."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Unfortunately, the SSO functionality is currently only available on a secondary tab of the App. In addition, there can only be one Custom Page. This seems useful for a settings page, but there is so much more potential here."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Using some custom JavaScript, you can recreate the SSO functionality from any Custom Menu Link. If you haven't already learned how to implement this from inside the iFrame, I suggest you head over to "},{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/watch?v=3rveQDuVlR0","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"Sergio Leon's video explaining the SSO process"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"setup"},"children":[{"type":"text","value":"Setup"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To start this, you will need an Application set up and installed, and an SSO Key generated for it."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You will need to know the Application ID and Location ID. You can insert the location ID into the link dynamically. From the tooltip on the Menu Link edit screen:"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You may use Location values and Custom Values in here. (These will only work on the Location side bar, when inside an account) Example: "},{"type":"element","tag":"a","props":{"href":"http://url.com/%7B%7Blocation.id%7D%7D?value=%7B%7Bcustom_values.my_value%7D%7D","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"http://url.com/{{location.id}}?value={{custom_values.my_value}}"}]}]}]},{"type":"element","tag":"h2","props":{"id":"custom-link-sso-implementation"},"children":[{"type":"text","value":"Custom Link SSO Implementation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In your Settings > Company page, there is a Custom Javascript box. This code will go in that box."}]},{"type":"element","tag":"h3","props":{"id":"event-listener"},"children":[{"type":"text","value":"Event Listener"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We need to re-create the event listener that GHL provides on the Application Custom Page tab. This is a standard "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"event listener"}]},{"type":"text","value":" attatched to the window. This listens for a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"message"}]},{"type":"text","value":" event and executes the code. It is important that we set up an "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"async"}]},{"type":"text","value":" function, since this will handle "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"Promises"}]},{"type":"text","value":". We're using "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#:~:text=Unpacking%20properties%20from%20objects%20passed%20as%20a%20function%20parameter","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"destructuring"}]},{"type":"text","value":" to pull just the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data"}]},{"type":"text","value":" object out of the event."}]},{"type":"element","tag":"code","props":{"code":"window.addEventListener(\"message\", async function({ data }){ ... });\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"window."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"addEventListener"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"message\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-08b69c"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" }){ "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" });"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Since the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"message"}]},{"type":"text","value":" event is used by many functions, you want to make sure this is the event we're looking for. The name used by the official GHL implementation is "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"REQUEST_USER_DATA"}]},{"type":"text","value":". If you change this, it needs to match on both the custom listener and the app loaded inside the iFrame."}]},{"type":"element","tag":"code","props":{"code":"if (data.message === \"REQUEST_USER_DATA\") {\n  //...\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" (data.message "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"REQUEST_USER_DATA\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a5618b"},"children":[{"type":"text","value":"//..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"authenticated-api-requests"},"children":[{"type":"text","value":"Authenticated API requests"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We'll need to be able to make an authenticated request for the session details. All API requests from the browser require these headers:"}]},{"type":"element","tag":"code","props":{"code":"const requestHeaders = new Headers();\nrequestHeaders.append(\"source\", \"WEB_USER\");\nrequestHeaders.append(\"version\", \"2021-07-28\");\nrequestHeaders.append(\"accept\", \"application/json, text/plain, */*\");\nrequestHeaders.append(\"channel\", \"APP\");\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-95133c"},"children":[{"type":"text","value":"requestHeaders"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"Headers"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"requestHeaders."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"append"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"source\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"WEB_USER\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"requestHeaders."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"append"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"version\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"2021-07-28\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"requestHeaders."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"append"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"accept\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"application/json, text/plain, */*\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"requestHeaders."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"append"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"channel\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"APP\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then this header is what provides the current user's token. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window.getToken()"}]},{"type":"text","value":" is provided by the primary GHL application."}]},{"type":"element","tag":"code","props":{"code":"requestHeaders.append(\"token-id\", await window.getToken());\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"requestHeaders."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"append"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"token-id\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" window."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"getToken"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"());"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For this SSO request, you'll also need to provide the location ID in a header."}]},{"type":"element","tag":"code","props":{"code":"requestHeaders.append(\"location\", locationId);\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"requestHeaders."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"append"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"location\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":", locationId);"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"retrieving-session-details"},"children":[{"type":"text","value":"Retrieving Session Details"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We can get the details by making a request to the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"session-details"}]},{"type":"text","value":" endpoint with those headers and the App ID."}]},{"type":"element","tag":"code","props":{"code":"const sessionDetailsResponse = fetch(`https://services.leadconnectorhq.com/oauth/sso/${appId}/session-details`, {\n  method: \"GET\",\n  headers: requestHeaders,\n});\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-95133c"},"children":[{"type":"text","value":"sessionDetailsResponse"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"`https://services.leadconnectorhq.com/oauth/sso/${"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"appId"}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"}/session-details`"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":", {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"  method: "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"GET\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"  headers: requestHeaders,"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Get the JSON payload from request"}]},{"type":"element","tag":"code","props":{"code":"const sessionDetails = await sessionDetailsResponse.json();\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-95133c"},"children":[{"type":"text","value":"sessionDetails"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" sessionDetailsResponse."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"json"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"();"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"response-event"},"children":[{"type":"text","value":"Response Event"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now that we have the encrypted session data, when we want to reply to the iFrame. We'll need to have a target DOM element to send the message to. In this case, its the iFrame inside the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".custom-link"}]},{"type":"text","value":" container."}]},{"type":"element","tag":"code","props":{"code":"const frame = document.querySelector(\".custom-link iframe\");\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-95133c"},"children":[{"type":"text","value":"frame"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" document."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"querySelector"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\".custom-link iframe\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We're looking for the "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/API/HTMLIFrameElement/contentWindow","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"contentWindow"}]},{"type":"text","value":" property of the iFrame. This gives us the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window"}]},{"type":"text","value":" object inside the iFrame. Now we can post a message "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"inside"}]},{"type":"text","value":" the iFrame with the session details. The official implementation uses the message name "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"REQUEST_USER_DATA_RESPONSE"}]},{"type":"text","value":", again if you change that here, you must change it on the app loaded inside the iFrame."}]},{"type":"element","tag":"code","props":{"code":"frame.contentWindow.postMessage(\n  {\n    message: \"REQUEST_USER_DATA_RESPONSE\",\n    payload: sessionDetails.data,\n  },\n  \"*\"\n);\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"frame.contentWindow."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"postMessage"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"  {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    message: "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"REQUEST_USER_DATA_RESPONSE\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    payload: sessionDetails.data,"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"*\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"custom-menu-link-implementation"},"children":[{"type":"text","value":"Custom Menu Link Implementation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now your app needs to do the same request dance as the Custom Page. You can view that process "},{"type":"element","tag":"a","props":{"href":"https://github.com/cbnsndwch/ghl-app-template#sso-iframe-integration","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"here"}]},{"type":"text","value":". Remember if you have changed the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"REQUEST_USER_DATA"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"REQUEST_USER_DATA_RESPONSE"}]},{"type":"text","value":" message names here, they need to be changed in your app implementation too."}]},{"type":"element","tag":"h2","props":{"id":"the-code"},"children":[{"type":"text","value":"The Code"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here's the full code"}]},{"type":"element","tag":"code","props":{"code":"const appId = \"123\";\nconst locationId = \"abc\";\n\nwindow.addEventListener(\"message\", async ({ data }) => {\n  // Make sure this is a request for user data\n  if (data.message === \"REQUEST_USER_DATA\") {\n    // Build request headers\n    const requestHeaders = new Headers();\n    requestHeaders.append(\"source\", \"WEB_USER\");\n    requestHeaders.append(\"version\", \"2021-07-28\");\n    requestHeaders.append(\"accept\", \"application/json, text/plain, */*\");\n    requestHeaders.append(\"channel\", \"APP\");\n    requestHeaders.append(\"location\", locationId);\n    requestHeaders.append(\"token-id\", await window.getToken());\n\n    // Request session key from GHL endpoint\n    const sessionDetailsResponse = await fetch(`https://services.leadconnectorhq.com/oauth/sso/${appId}/session-details`, {\n      method: \"GET\",\n      headers: requestHeaders,\n    });\n\n    // Get JSON payload from request\n    const sessionDetails = await sessionDetailsResponse.json();\n\n    // Find the iFrame\n    const frame = document.querySelector(\".custom-link iframe\");\n\n    // Respond to iFrame with data\n    frame.contentWindow.postMessage(\n      {\n        message: \"REQUEST_USER_DATA_RESPONSE\",\n        payload: sessionDetails.data,\n      },\n      \"*\"\n    );\n  }\n});\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-95133c"},"children":[{"type":"text","value":"appId"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"123\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-95133c"},"children":[{"type":"text","value":"locationId"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"abc\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"window."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"addEventListener"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"message\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" ({ "}]},{"type":"element","tag":"span","props":{"class":"ct-08b69c"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" }) "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a5618b"},"children":[{"type":"text","value":"// Make sure this is a request for user data"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" (data.message "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"REQUEST_USER_DATA\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a5618b"},"children":[{"type":"text","value":"// Build request headers"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-95133c"},"children":[{"type":"text","value":"requestHeaders"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"Headers"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    requestHeaders."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"append"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"source\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"WEB_USER\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    requestHeaders."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"append"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"version\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"2021-07-28\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    requestHeaders."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"append"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"accept\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"application/json, text/plain, */*\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    requestHeaders."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"append"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"channel\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"APP\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    requestHeaders."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"append"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"location\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":", locationId);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    requestHeaders."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"append"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"token-id\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" window."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"getToken"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"());"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a5618b"},"children":[{"type":"text","value":"// Request session key from GHL endpoint"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-95133c"},"children":[{"type":"text","value":"sessionDetailsResponse"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"`https://services.leadconnectorhq.com/oauth/sso/${"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"appId"}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"}/session-details`"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":", {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"      method: "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"GET\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"      headers: requestHeaders,"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a5618b"},"children":[{"type":"text","value":"// Get JSON payload from request"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-95133c"},"children":[{"type":"text","value":"sessionDetails"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" sessionDetailsResponse."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"json"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a5618b"},"children":[{"type":"text","value":"// Find the iFrame"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-95133c"},"children":[{"type":"text","value":"frame"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d6459"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":" document."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"querySelector"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\".custom-link iframe\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a5618b"},"children":[{"type":"text","value":"// Respond to iFrame with data"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    frame.contentWindow."}]},{"type":"element","tag":"span","props":{"class":"ct-d604c0"},"children":[{"type":"text","value":"postMessage"}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"      {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"        message: "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"REQUEST_USER_DATA_RESPONSE\""}]},{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"        payload: sessionDetails.data,"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"      },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-3a735c"},"children":[{"type":"text","value":"\"*\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"    );"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fb44a2"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-95133c{color:#79C0FF}\n.ct-a5618b{color:#8B949E}\n.ct-08b69c{color:#FFA657}\n.ct-3d6459{color:#FF7B72}\n.ct-3a735c{color:#A5D6FF}\n.ct-d604c0{color:#D2A8FF}\n.ct-fb44a2{color:#C9D1D9}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"setup","depth":2,"text":"Setup"},{"id":"custom-link-sso-implementation","depth":2,"text":"Custom Link SSO Implementation","children":[{"id":"event-listener","depth":3,"text":"Event Listener"},{"id":"authenticated-api-requests","depth":3,"text":"Authenticated API requests"},{"id":"retrieving-session-details","depth":3,"text":"Retrieving Session Details"},{"id":"response-event","depth":3,"text":"Response Event"}]},{"id":"custom-menu-link-implementation","depth":2,"text":"Custom Menu Link Implementation"},{"id":"the-code","depth":2,"text":"The Code"}]}},"_type":"markdown","_id":"content:blog:high-level-sso-custom-links.md","_source":"content","_file":"blog/high-level-sso-custom-links.md","_extension":"md"}